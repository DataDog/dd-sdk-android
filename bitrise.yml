---
format_version: '8'
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
project_type: android
workflows:
  ci:
    steps:
      - script:
          title: Provide Instrumentation Tests Artifacts
          inputs:
            - content: |-
                #!/bin/bash
                set -ex
                ./gradlew buildIntegrationTestsArtifacts
      - cache-push@2.0.1: {}
      - virtual-device-testing-for-android@1.1.1:
          inputs:
            - test_type: instrumentation
            - apk_path: "./instrumented/integration/build/outputs/apk/debug/integration-debug.apk"
            - test_apk_path: "./instrumented/integration/build/outputs/apk/androidTest/debug/integration-debug-androidTest.apk"
            - download_test_results: 'true'
            - test_devices: Pixel2,28,en,portrait
          title: Run App Instrumentation Tests

app:
  envs:
    - opts:
        is_expand: false
      PROJECT_LOCATION: "."